variables:
  NUGET_PACKAGES: $(Pipeline.Workspace)/.nuget/packages

schedules:
- cron: 0 0 * * Wed
  displayName: Weekly build (patching)
  branches:
    include:
    - main
  always: true

trigger:
- main

name: '$(Date:%y).$(DayOfYear).$(Rev:r)'

stages:

- stage: Build
  jobs:
  - template: jobs/build.yml

- stage: Deploy_PreReqs
  dependsOn: []
  displayName: Deploy PreReqs
  pool:
    vmImage: windows-latest
  jobs:
  - template: jobs/deploy-prereqs.yml
